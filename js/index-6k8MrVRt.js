import{r as t,F as a,j as Ae}from"../jse/index-index-CuT9J82M.js";import{P as qe,Q as Qe,R as Ze,U as Xe,V as et,W as tt,X as st,Y as rt,Z as Ue,$ as He,a0 as nt,a1 as ae,a2 as ot,a3 as at,a4 as ct,a5 as ve,a6 as lt,a7 as it,a8 as ut,a9 as dt,aa as pt,ab as mt,ac as Ee,ad as ht,ae as ft,af as Ct,ag as gt,ah as yt,ai as Rt,aj as vt,ak as de,al as wt,am as St,an as bt,ao as Et,ap as Pt}from"./bootstrap-Gpg-_wXy.js";import{r as Ve,R as kt}from"./index-CNgUcgqS.js";var Q=a.createContext({}),he=(e,s,r,o)=>{if(!e||e.componentFromFramework||s.isDestroyed())return;const i=e.newAgStackInstance();let u,c,l=!1;return i.then(p=>{if(l){s.destroyBean(p);return}u=p,c=u.getGui(),r.appendChild(c),De(o,u)}),()=>{l=!0,u&&(c?.parentElement?.removeChild(c),s.destroyBean(u),o&&De(o,void 0))}},De=(e,s)=>{if(e)if(e instanceof Function)e(s);else{const r=e;r.current=s}},se=(...e)=>e.filter(r=>r!=null&&r!=="").join(" "),re=class _e{constructor(...s){this.classesMap={},s.forEach(r=>{this.classesMap[r]=!0})}setClass(s,r){if(!!this.classesMap[s]==r)return this;const n=new _e;return n.classesMap={...this.classesMap},n.classesMap[s]=r,n}toString(){return Object.keys(this.classesMap).filter(r=>this.classesMap[r]).join(" ")}},pe=e=>{const s=()=>typeof Symbol=="function"&&Symbol.for,r=()=>s()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===r()},ke=a.version?.split(".")[0],Mt=ke==="16"||ke==="17";function Ft(){return ke==="19"}var ge=!1;function xt(e){return ge||setTimeout(()=>ge=!1,0),ge=!0,e()}var ye=(e,s)=>{!Mt&&e&&!ge?kt.flushSync(s):s()};function Re(e,s,r){if(s==null||e==null)return s;if(e===s||s.length===0&&e.length===0)return e;if(r||e.length===0&&s.length>0||e.length>0&&s.length===0)return s;const o=[],n=[],i=new Map,u=new Map;for(let c=0;c<s.length;c++){const l=s[c];u.set(l.instanceId,l)}for(let c=0;c<e.length;c++){const l=e[c];i.set(l.instanceId,l),u.has(l.instanceId)&&o.push(l)}for(let c=0;c<s.length;c++){const l=s[c],p=l.instanceId;i.has(p)||n.push(l)}return o.length===e.length&&n.length===0?e:o.length===0&&n.length===s.length?s:o.length===0?n:n.length===0?o:[...o,...n]}var Le=t.forwardRef((e,s)=>{const{registry:r,context:o}=t.useContext(Q),n=t.useRef(null),i=t.useRef(null),u=t.useRef(null),c=t.useRef(null),l=t.useRef(null),p=t.useRef(),[d,v]=t.useState(),[g,m]=t.useState(),[E,R]=t.useState(),[f,h]=t.useState(()=>new re),[w,F]=t.useState(()=>new re("ag-hidden")),[P,b]=t.useState(()=>new re("ag-hidden")),[D,A]=t.useState(()=>new re("ag-invisible"));t.useImperativeHandle(s,()=>({refresh(){return!1}})),t.useLayoutEffect(()=>he(d,o,i.current),[d]);const H=t.useCallback(V=>{if(n.current=V,!V){p.current=o.destroyBean(p.current);return}const y={setInnerRenderer:(k,I)=>{v(k),R(I)},setChildCount:k=>m(k),addOrRemoveCssClass:(k,I)=>h(z=>z.setClass(k,I)),setContractedDisplayed:k=>b(I=>I.setClass("ag-hidden",!k)),setExpandedDisplayed:k=>F(I=>I.setClass("ag-hidden",!k)),setCheckboxVisible:k=>A(I=>I.setClass("ag-invisible",!k)),setCheckboxSpacing:k=>A(I=>I.setClass("ag-group-checkbox-spacing",k))},T=r.createDynamicBean("groupCellRendererCtrl",!0);T&&(p.current=o.createBean(T),p.current.init(y,V,u.current,c.current,l.current,Le,e))},[]),W=t.useMemo(()=>`ag-cell-wrapper ${f.toString()}`,[f]),C=t.useMemo(()=>`ag-group-expanded ${w.toString()}`,[w]),M=t.useMemo(()=>`ag-group-contracted ${P.toString()}`,[P]),G=t.useMemo(()=>`ag-group-checkbox ${D.toString()}`,[D]),S=d&&d.componentFromFramework,_=S?d.componentClass:void 0,x=d==null&&E!=null,U=nt(E,!0);return a.createElement("span",{className:W,ref:H,...e.colDef?{}:{role:p.current?.getCellAriaRole()}},a.createElement("span",{className:C,ref:c}),a.createElement("span",{className:M,ref:l}),a.createElement("span",{className:G,ref:u}),a.createElement("span",{className:"ag-group-value",ref:i},x&&a.createElement(a.Fragment,null,U),S&&a.createElement(_,{...d.params})),a.createElement("span",{className:"ag-group-child-count"},g))}),Ie=Le,Me=t.createContext({setMethods:()=>{}}),Gt=e=>{const{initialProps:s,addUpdateCallback:r,CustomComponentClass:o,setMethods:n}=e,[{key:i,...u},c]=t.useState(s);return t.useEffect(()=>{r(l=>c(l))},[]),a.createElement(Me.Provider,{value:{setMethods:n}},a.createElement(o,{key:i,...u}))},Bt=t.memo(Gt),At=0;function Oe(){return`agPortalKey_${++At}`}var je=class{constructor(e,s,r,o){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=s,this.componentType=r,this.suppressFallbackMethods=!!o,this.statelessComponent=this.isStateless(this.reactComponent),this.key=Oe(),this.portalKey=Oe(),this.instanceCreated=this.isStatelessComponent()?ae.resolve(!1):new ae(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const s=this.portalManager.getComponentWrappingElement(),r=document.createElement(s||"div");return r.classList.add("ag-react-container"),e.reactContainer=r,r}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const s=this.getFrameworkComponentInstance();return!!s&&s[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,s){const r=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,s&&s[0]?s[0]:{});if(!r){setTimeout(()=>this.callMethod(e,s));return}const o=r[e];if(o)return o.apply(r,s);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,s&&s[0]?s[0]:{})}addMethod(e,s){this[e]=s}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new ae(s=>this.createReactComponent(s))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=s=>{this.componentInstance=s,this.resolveInstanceCreated?.(!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=Ve.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,s){return t.createElement(e,s)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,s){const r=this[`${e}Component`];if(!this.suppressFallbackMethods&&r)return r.bind(this)(s)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function Fe(e,s,r){e.forEach(o=>{const n=s[o];n&&(r[o]=n)})}var ne=class extends je{constructor(){super(...arguments),this.awaitUpdateCallback=new ae(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=Bt}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,s){return super.createElement(this.wrapperComponent,{initialProps:s,CustomComponentClass:e,setMethods:r=>this.setMethods(r),addUpdateCallback:r=>{this.updateCallback=()=>(r(this.getProps()),new ae(o=>{setTimeout(()=>{o()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Fe(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new ae(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},Dt=class extends ne{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},It=class extends ne{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},Ot=class extends ne{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,s){this.icon=e,this.shake=s,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:s,icon:r,shake:o}=this;return e.label=s,e.icon=r,e.shake=o,e}},Wt=class extends ne{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterModifiedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1,this.awaitSetMethodsCallback=new ae(e=>{this.resolveSetMethodsCallback=e})}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}afterGuiAttached(e){const s=this.providedMethods;s?s.afterGuiAttached?.(e):this.awaitSetMethodsCallback.then(()=>this.providedMethods?.afterGuiAttached?.(e))}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){this.expectingNewMethods===!1&&this.hasBeenActive&&this.providedMethods?.doesFilterPass!==e?.doesFilterPass&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e),this.resolveSetMethodsCallback()}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,e}};function ze(e,s){e.parentFilterInstance(r=>{(r.setModel(s)||ae.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Tt=class{constructor(e,s){this.floatingFilterParams=e,this.refreshProps=s,this.model=null,this.onModelChange=r=>this.updateModel(r)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Fe(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),ze(this.floatingFilterParams,e)}},Nt=class extends ne{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),ze(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Ut=class extends ne{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},Ht=class extends ne{refresh(e){this.sourceParams=e,this.refreshProps()}},Vt=class extends ne{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const s=this.awaitSetActive(e);e&&s.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},_t=class extends ne{refresh(e){this.sourceParams=e,this.refreshProps()}},Lt=class extends ne{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},jt=class extends ne{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function xe(){Ue(231)}var zt=1e3,$t=class{constructor(e,s,r){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=s||"div",this.refresher=e,this.maxComponentCreationTimeMs=r||zt}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(s=>s!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,s,r){this.portals=[...this.portals,e],this.waitForInstance(s,r),this.batchUpdate()}updateReactPortal(e,s){this.portals[this.portals.indexOf(e)]=s,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,s,r=Date.now()){if(this.destroyed){s(null);return}if(e.rendered())s(e);else{if(Date.now()-r>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout(()=>{this.waitForInstance(e,s,r)})}}},Jt=({ctrl:e})=>{const s=e.isAlive(),{context:r}=t.useContext(Q),o=s?e.column.getColId():void 0,[n,i]=t.useState(),[u,c]=t.useState(),l=t.useRef(),p=t.useRef(null),d=t.useRef(null),v=t.useRef(null),g=t.useRef(),m=t.useRef();s&&!m.current&&(m.current=new ve(()=>p.current));const E=t.useCallback(w=>{if(p.current=w,l.current=w?r.createBean(new de):r.destroyBean(l.current),!w||!e.isAlive())return;const F={setWidth:b=>{p.current&&(p.current.style.width=b)},addOrRemoveCssClass:(b,D)=>m.current.addOrRemoveCssClass(b,D),setUserStyles:b=>c(b),setAriaSort:b=>{p.current&&(b?wt(p.current,b):St(p.current))},setUserCompDetails:b=>i(b),getUserCompInstance:()=>g.current||void 0};e.setComp(F,w,d.current,v.current,l.current);const P=e.getSelectAllGui();P&&(d.current?.insertAdjacentElement("afterend",P),l.current.addDestroyFunc(()=>P.remove()))},[]);t.useLayoutEffect(()=>he(n,r,v.current,g),[n]),t.useEffect(()=>{e.setDragSource(p.current)},[n]);const R=t.useMemo(()=>!!(n?.componentFromFramework&&pe(n.componentClass)),[n]),f=n&&n.componentFromFramework,h=n&&n.componentClass;return a.createElement("div",{ref:E,style:u,className:"ag-header-cell","col-id":o,role:"columnheader"},a.createElement("div",{ref:d,className:"ag-header-cell-resize",role:"presentation"}),a.createElement("div",{ref:v,className:"ag-header-cell-comp-wrapper",role:"presentation"},f&&R&&a.createElement(h,{...n.params}),f&&!R&&a.createElement(h,{...n.params,ref:g})))},Kt=t.memo(Jt),Yt=({ctrl:e})=>{const{context:s,gos:r}=t.useContext(Q),[o,n]=t.useState(),[i,u]=t.useState(()=>new re("ag-header-cell","ag-floating-filter")),[c,l]=t.useState(()=>new re),[p,d]=t.useState(()=>new re("ag-floating-filter-button","ag-hidden")),[v,g]=t.useState("false"),[m,E]=t.useState(),[,R]=t.useState(1),f=t.useRef(),h=t.useRef(null),w=t.useRef(null),F=t.useRef(null),P=t.useRef(null),b=t.useRef(),D=t.useRef(),A=y=>{y!=null&&b.current&&b.current(y)},H=t.useCallback(y=>{if(h.current=y,f.current=y?s.createBean(new de):s.destroyBean(f.current),!y)return;D.current=new ae(k=>{b.current=k});const T={addOrRemoveCssClass:(k,I)=>u(z=>z.setClass(k,I)),setUserStyles:k=>n(k),addOrRemoveBodyCssClass:(k,I)=>l(z=>z.setClass(k,I)),setButtonWrapperDisplayed:k=>{d(I=>I.setClass("ag-hidden",!k)),g(k?"false":"true")},setWidth:k=>{h.current&&(h.current.style.width=k)},setCompDetails:k=>E(k),getFloatingFilterComp:()=>D.current?D.current:null,setMenuIcon:k=>P.current?.appendChild(k)};e.setComp(T,y,P.current,w.current,f.current)},[]);t.useLayoutEffect(()=>he(m,s,w.current,A),[m]);const W=t.useMemo(()=>i.toString(),[i]),C=t.useMemo(()=>c.toString(),[c]),M=t.useMemo(()=>p.toString(),[p]),G=t.useMemo(()=>!!(m&&m.componentFromFramework&&pe(m.componentClass)),[m]),S=t.useMemo(()=>r.get("reactiveCustomComponents"),[]),_=t.useMemo(()=>{if(m)if(S){const y=new Tt(m.params,()=>R(T=>T+1));return A(y),y}else m.componentFromFramework&&xe()},[m]),x=_?.getProps(),U=m&&m.componentFromFramework,V=m&&m.componentClass;return a.createElement("div",{ref:H,style:o,className:W,role:"gridcell"},a.createElement("div",{ref:w,className:C,role:"presentation"},U&&!S&&a.createElement(V,{...m.params,ref:G?()=>{}:A}),U&&S&&a.createElement(Me.Provider,{value:{setMethods:y=>_.setMethods(y)}},a.createElement(V,{...x}))),a.createElement("div",{ref:F,"aria-hidden":v,className:M,role:"presentation"},a.createElement("button",{ref:P,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},qt=t.memo(Yt),Qt=({ctrl:e})=>{const{context:s}=t.useContext(Q),[r,o]=t.useState(),[n,i]=t.useState(()=>new re),[u,c]=t.useState(()=>new re),[l,p]=t.useState("false"),[d,v]=t.useState(),[g,m]=t.useState(),E=t.useMemo(()=>e.column.getUniqueId(),[]),R=t.useRef(),f=t.useRef(null),h=t.useRef(null),w=t.useRef(null),F=t.useRef(),P=t.useCallback(C=>{if(f.current=C,R.current=C?s.createBean(new de):s.destroyBean(R.current),!C)return;const M={setWidth:G=>{f.current&&(f.current.style.width=G)},addOrRemoveCssClass:(G,S)=>i(_=>_.setClass(G,S)),setUserStyles:G=>o(G),setHeaderWrapperHidden:G=>{const S=w.current;S&&(G?S.style.setProperty("display","none"):S.style.removeProperty("display"))},setHeaderWrapperMaxHeight:G=>{const S=w.current;S&&(G!=null?S.style.setProperty("max-height",`${G}px`):S.style.removeProperty("max-height"),S.classList.toggle("ag-header-cell-comp-wrapper-limited-height",G!=null))},setUserCompDetails:G=>m(G),setResizableDisplayed:G=>{c(S=>S.setClass("ag-hidden",!G)),p(G?"false":"true")},setAriaExpanded:G=>v(G),getUserCompInstance:()=>F.current||void 0};e.setComp(M,C,h.current,w.current,R.current)},[]);t.useLayoutEffect(()=>he(g,s,w.current),[g]),t.useEffect(()=>{f.current&&e.setDragSource(f.current)},[g]);const b=t.useMemo(()=>!!(g?.componentFromFramework&&pe(g.componentClass)),[g]),D=t.useMemo(()=>"ag-header-group-cell "+n.toString(),[n]),A=t.useMemo(()=>"ag-header-cell-resize "+u.toString(),[u]),H=g&&g.componentFromFramework,W=g&&g.componentClass;return a.createElement("div",{ref:P,style:r,className:D,"col-id":E,role:"columnheader","aria-expanded":d},a.createElement("div",{ref:w,className:"ag-header-cell-comp-wrapper",role:"presentation"},H&&b&&a.createElement(W,{...g.params}),H&&!b&&a.createElement(W,{...g.params,ref:F})),a.createElement("div",{ref:h,"aria-hidden":l,className:A}))},Zt=t.memo(Qt),Xt=({ctrl:e})=>{const{context:s}=t.useContext(Q),{topOffset:r,rowHeight:o}=t.useMemo(()=>e.getTopAndHeight(),[]),n=e.getAriaRowIndex(),i=e.headerRowClass,[u,c]=t.useState(()=>o+"px"),[l,p]=t.useState(()=>r+"px"),d=t.useRef(null),v=t.useRef(null),[g,m]=t.useState(()=>e.getUpdatedHeaderCtrls()),E=t.useRef(),R=t.useRef(null),f=t.useCallback(F=>{if(R.current=F,E.current=F?s.createBean(new de):s.destroyBean(E.current),!F)return;const P={setHeight:b=>c(b),setTop:b=>p(b),setHeaderCtrls:(b,D,A)=>{v.current=d.current,d.current=b;const H=Re(v.current,b,D);H!==v.current&&ye(A,()=>m(H))},setWidth:b=>{R.current&&(R.current.style.width=b)}};e.setComp(P,E.current,!1)},[]),h=t.useMemo(()=>({height:u,top:l}),[u,l]),w=t.useCallback(F=>{switch(e.type){case"group":return a.createElement(Zt,{ctrl:F,key:F.instanceId});case"filter":return a.createElement(qt,{ctrl:F,key:F.instanceId});default:return a.createElement(Kt,{ctrl:F,key:F.instanceId})}},[]);return a.createElement("div",{ref:f,className:i,role:"row",style:h,"aria-rowindex":n},g.map(w))},es=t.memo(Xt),ts=({pinned:e})=>{const[s,r]=t.useState(!0),[o,n]=t.useState([]),{context:i}=t.useContext(Q),u=t.useRef(null),c=t.useRef(null),l=t.useRef(),p=e==="left",d=e==="right",v=!p&&!d,g=t.useCallback(R=>{if(u.current=R,l.current=R?i.createBean(new ft(e)):i.destroyBean(l.current),!R)return;const f={setDisplayed:r,setCtrls:h=>n(h),setCenterWidth:h=>{c.current&&(c.current.style.width=h)},setViewportScrollLeft:h=>{u.current&&(u.current.scrollLeft=h)},setPinnedContainerWidth:h=>{u.current&&(u.current.style.width=h,u.current.style.minWidth=h,u.current.style.maxWidth=h)}};l.current.setComp(f,u.current)},[]),m=s?"":"ag-hidden",E=()=>o.map(R=>a.createElement(es,{ctrl:R,key:R.instanceId}));return a.createElement(a.Fragment,null,p&&a.createElement("div",{ref:g,className:"ag-pinned-left-header "+m,"aria-hidden":!s,role:"rowgroup"},E()),d&&a.createElement("div",{ref:g,className:"ag-pinned-right-header "+m,"aria-hidden":!s,role:"rowgroup"},E()),v&&a.createElement("div",{ref:g,className:"ag-header-viewport "+m,role:"presentation",tabIndex:-1},a.createElement("div",{ref:c,className:"ag-header-container",role:"rowgroup"},E())))},Pe=t.memo(ts),ss=()=>{const[e,s]=t.useState(()=>new re),[r,o]=t.useState(),{context:n}=t.useContext(Q),i=t.useRef(null),u=t.useRef(),c=t.useCallback(d=>{if(i.current=d,u.current=d?n.createBean(new ht):n.destroyBean(u.current),!d)return;const v={addOrRemoveCssClass:(g,m)=>s(E=>E.setClass(g,m)),setHeightAndMinHeight:g=>o(g)};u.current.setComp(v,d,d)},[]),l=t.useMemo(()=>"ag-header "+e.toString(),[e]),p=t.useMemo(()=>({height:r,minHeight:r}),[r]);return a.createElement("div",{ref:c,className:l,style:p,role:"presentation"},a.createElement(Pe,{pinned:"left"}),a.createElement(Pe,{pinned:null}),a.createElement(Pe,{pinned:"right"}))},rs=t.memo(ss),ns=(e,s)=>{t.useEffect(()=>{const r=s.current;if(r){const o=r.parentElement;if(o){const n=document.createComment(e);return o.insertBefore(n,r),()=>{o.removeChild(n)}}}},[e])},ie=ns,os=class{constructor(e,s){this.cellEditorParams=e,this.refreshProps=s,this.instanceCreated=new ae(r=>{this.resolveInstanceCreated=r}),this.onValueChange=r=>this.updateValue(r),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Fe(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){this.componentInstance=e,this.resolveInstanceCreated?.(),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},as=e=>{const s=t.useRef(e),r=t.useRef(),o=t.useRef(!1),n=t.useRef(!1),[,i]=t.useState(0);o.current&&(n.current=!0),t.useEffect(()=>(o.current||(r.current=s.current(),o.current=!0),i(u=>u+1),()=>{n.current&&r.current?.()}),[])},cs=e=>{const[s,r]=t.useState(),o=t.useContext(Q),{context:n,popupSvc:i,localeSvc:u,gos:c,editSvc:l}=o,{editDetails:p,cellCtrl:d,eParentCell:v}=e;return as(()=>{const{compDetails:g}=p,m=c.get("stopEditingWhenCellsLoseFocus"),E=n.createBean(l.createPopupEditorWrapper(g.params)),R=E.getGui();if(e.jsChildComp){const A=e.jsChildComp.getGui();A&&R.appendChild(A)}const{column:f,rowNode:h}=d,w={column:f,rowNode:h,type:"popupCellEditor",eventSource:v,ePopup:R,position:p.popupPosition,keepWithinBounds:!0},F=i?.positionPopupByComponent.bind(i,w),P=Pt(u),b=i?.addPopup({modal:m,eChild:R,closeOnEsc:!0,closedCallback:()=>{d.onPopupEditorClosed()},anchorToElement:v,positionCallback:F,ariaLabel:P("ariaLabelCellEditor","Cell Editor")}),D=b?b.hideFunc:void 0;return r(E),e.jsChildComp?.afterGuiAttached?.(),()=>{D?.(),n.destroyBean(E)}}),t.useLayoutEffect(()=>()=>{d.isCellFocused()&&s?.getGui().contains(Et(o))&&v.focus({preventScroll:!0})},[s]),a.createElement(a.Fragment,null,s&&e.wrappedContent&&Ve.createPortal(e.wrappedContent,s.getGui()))},We=t.memo(cs),ls=(e,s,r,o,n,i)=>{const{context:u}=t.useContext(Q),c=t.useCallback(()=>{const l=n.current;if(!l)return;const p=l.getGui();p&&p.parentElement&&p.parentElement.removeChild(p),u.destroyBean(l),n.current=void 0},[]);t.useEffect(()=>{const l=e!=null,p=e?.compDetails&&!e.compDetails.componentFromFramework,d=s&&r==null;if(!(l&&p&&!d)){c();return}const g=e.compDetails;if(n.current){const E=n.current,f=E.refresh!=null&&e.force==!1?E.refresh(g.params):!1;if(f===!0||f===void 0)return;c()}g.newAgStackInstance().then(E=>{if(!E)return;const R=E.getGui();if(!R)return;(s?r:i.current).appendChild(R),n.current=E})},[e,s,o]),t.useEffect(()=>c,[])},is=ls,us=(e,s,r)=>{const{compProxy:o}=e;r(o);const n=o.getProps(),i=pe(s);return a.createElement(Me.Provider,{value:{setMethods:u=>o.setMethods(u)}},i?a.createElement(s,{...n}):a.createElement(s,{...n,ref:u=>o.setRef(u)}))},Te=(e,s,r)=>{const o=e.compProxy;return a.createElement(a.Fragment,null,o?us(e,s,r):a.createElement(s,{...e.compDetails.params,ref:r}))},ds=(e,s,r,o,n)=>{const i=e.compDetails,u=i.componentClass,c=i.componentFromFramework&&!e.popup,l=i.componentFromFramework&&e.popup,p=!i.componentFromFramework&&e.popup;return a.createElement(a.Fragment,null,c&&Te(e,u,s),l&&a.createElement(We,{editDetails:e,cellCtrl:o,eParentCell:r,wrappedContent:Te(e,u,s)}),p&&n&&a.createElement(We,{editDetails:e,cellCtrl:o,eParentCell:r,jsChildComp:n}))},ps=(e,s,r,o,n,i,u)=>{const{compDetails:c,value:l}=e,p=!c,d=c&&c.componentFromFramework,v=c&&c.componentClass,g=l?.toString?l.toString():l,m=()=>a.createElement(a.Fragment,null,p&&a.createElement(a.Fragment,null,g),d&&!i&&a.createElement(v,{...c.params,key:s,ref:o}),d&&i&&a.createElement(v,{...c.params,key:s}));return a.createElement(a.Fragment,null,n?a.createElement("span",{role:"presentation",id:`cell-${r}`,className:"ag-cell-value",ref:u},m()):m())},ms=({cellCtrl:e,printLayout:s,editingRow:r})=>{const o=t.useContext(Q),{context:n}=o,{colIdSanitised:i,instanceId:u}=e,c=t.useRef(),[l,p]=t.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[d,v]=t.useState(),[g,m]=t.useState(1),[E,R]=t.useState(),[f,h]=t.useState(!1),[w,F]=t.useState(!1),[P,b]=t.useState(!1),[D,A]=t.useState(),H=t.useMemo(()=>e.isForceWrapper(),[e]),W=t.useMemo(()=>e.getCellAriaRole(),[e]),C=t.useRef(null),M=t.useRef(null),G=t.useRef(null),S=t.useRef(),_=t.useRef(),x=t.useRef(),U=t.useRef([]),V=t.useRef(),[y,T]=t.useState(0),k=t.useCallback(L=>{V.current=L,T($=>$+1)},[]),I=l!=null&&(f||P||w),z=H||I,N=t.useCallback(L=>{if(_.current=L,L){const $=L.isCancelBeforeStart&&L.isCancelBeforeStart();setTimeout(()=>{$?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()})}},[e]),B=t.useRef();B.current||(B.current=new ve(()=>C.current)),is(l,z,V.current,y,S,C);const K=t.useRef();t.useLayoutEffect(()=>{const L=K.current,$=l;if(K.current=l,L==null||L.compDetails==null||$==null||$.compDetails==null)return;const Y=L.compDetails,ee=$.compDetails;if(Y.componentClass!=ee.componentClass||G.current?.refresh==null)return;G.current.refresh(ee.params)!=!0&&m(q=>q+1)},[l]),t.useLayoutEffect(()=>{if(!(d&&!d.compDetails.componentFromFramework))return;const $=d.compDetails,Y=d.popup===!0,ee=$.newAgStackInstance();return ee.then(O=>{if(!O)return;const q=O.getGui();N(O),Y||((H?x:C).current?.appendChild(q),O.afterGuiAttached&&O.afterGuiAttached()),A(O)}),()=>{ee.then(O=>{const q=O.getGui();n.destroyBean(O),N(void 0),A(void 0),q?.parentElement?.removeChild(q)})}},[d]);const J=t.useCallback(L=>{if(x.current=L,!L){U.current.forEach(Y=>Y()),U.current=[];return}const $=Y=>{if(Y){const ee=Y.getGui();L.insertAdjacentElement("afterbegin",ee),U.current.push(()=>{n.destroyBean(Y),bt(ee)})}return Y};if(f){const Y=e.createSelectionCheckbox();$(Y)}P&&$(e.createDndSource()),w&&$(e.createRowDragComp())},[e,n,P,w,f]),oe=t.useCallback(()=>{const L=!e.isCellSpanning()||M.current,$=C.current;if(c.current=$?n.createBean(new de):n.destroyBean(c.current),!$||!L||!e)return;const Y={addOrRemoveCssClass:(O,q)=>B.current.addOrRemoveCssClass(O,q),setUserStyles:O=>R(O),getFocusableElement:()=>C.current,setIncludeSelection:O=>h(O),setIncludeRowDrag:O=>F(O),setIncludeDndSource:O=>b(O),getCellEditor:()=>_.current||null,getCellRenderer:()=>G.current??S.current,getParentOfValue:()=>V.current??x.current??C.current,setRenderDetails:(O,q,le)=>{p(te=>te?.compDetails!==O||te?.value!==q||te?.force!==le?{value:q,compDetails:O,force:le}:te)},setEditDetails:(O,q,le,te)=>{if(O){let Z;te?Z=new os(O.params,()=>m(ce=>ce+1)):O.componentFromFramework&&xe(),v({compDetails:O,popup:q,popupPosition:le,compProxy:Z}),q||p(void 0)}else e.hasBrowserFocus()&&Y.getFocusableElement().focus({preventScroll:!0}),v(ce=>{ce?.compProxy&&(_.current=void 0)})}},ee=x.current||void 0;e.setComp(Y,$,M.current??void 0,ee,s,r,c.current)},[]),ue=t.useCallback(L=>{C.current=L,oe()},[]),we=t.useCallback(L=>{M.current=L,oe()},[]),Se=t.useMemo(()=>!!(l?.compDetails?.componentFromFramework&&pe(l.compDetails.componentClass)),[l]);t.useLayoutEffect(()=>{C.current&&(B.current.addOrRemoveCssClass("ag-cell-value",!z),B.current.addOrRemoveCssClass("ag-cell-inline-editing",!!d&&!d.popup),B.current.addOrRemoveCssClass("ag-cell-popup-editing",!!d&&!!d.popup),B.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!d||!!d.popup),e.setInlineEditingCss())});const fe=()=>a.createElement(a.Fragment,null,l!=null&&ps(l,g,u,G,z,Se,k),d!=null&&ds(d,N,C.current,e,D)),Ce=()=>a.createElement("div",{ref:ue,style:E,role:W,"col-id":i},z?a.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:J},fe()):fe());return e.isCellSpanning()?a.createElement("div",{ref:we,className:"ag-spanned-cell-wrapper",role:"presentation"},Ce()):Ce()},hs=t.memo(ms),fs=({rowCtrl:e,containerType:s})=>{const{context:r,gos:o}=t.useContext(Q),n=t.useRef(),i=t.useRef(e.getDomOrder()),u=e.isFullWidth(),c=e.rowNode.displayed,[l,p]=t.useState(()=>c?e.rowNode.getRowIndexString():null),[d,v]=t.useState(()=>e.rowId),[g,m]=t.useState(()=>e.businessKey),[E,R]=t.useState(()=>e.rowStyles),f=t.useRef(null),h=t.useRef(null),[w,F]=t.useState(()=>null),[P,b]=t.useState(),[D,A]=t.useState(()=>c?e.getInitialRowTop(s):void 0),[H,W]=t.useState(()=>c?e.getInitialTransform(s):void 0),C=t.useRef(null),M=t.useRef(),G=t.useRef(!1),[S,_]=t.useState(0);t.useEffect(()=>{if(G.current||!P||S>10)return;const B=C.current?.firstChild;B?(e.setupDetailRowAutoHeight(B),G.current=!0):_(K=>K+1)},[P,S]);const x=t.useRef();x.current||(x.current=new ve(()=>C.current));const U=t.useCallback(B=>{if(C.current=B,n.current=B?r.createBean(new de):r.destroyBean(n.current),!B){e.unsetComp(s);return}if(!e.isAlive())return;const K={setTop:A,setTransform:W,addOrRemoveCssClass:(J,oe)=>x.current.addOrRemoveCssClass(J,oe),setDomOrder:J=>i.current=J,setRowIndex:p,setRowId:v,setRowBusinessKey:m,setUserStyles:R,setCellCtrls:(J,oe)=>{h.current=f.current,f.current=J;const ue=Re(h.current,J,i.current);ue!==h.current&&ye(oe,()=>F(ue))},showFullWidth:J=>b(J),getFullWidthCellRenderer:()=>M.current,refreshFullWidth:J=>I.current?(b(oe=>({...oe,params:J()})),!0):!M.current||!M.current.refresh?!1:M.current.refresh(J())};e.setComp(K,B,s,n.current)},[]);t.useLayoutEffect(()=>he(P,r,C.current,M),[P]);const V=t.useMemo(()=>{const B={top:D,transform:H};return Object.assign(B,E),B},[D,H,E]),y=u&&P?.componentFromFramework,T=!u&&w!=null,k=t.useMemo(()=>!!(P?.componentFromFramework&&pe(P.componentClass)),[P]),I=t.useRef(!1);t.useEffect(()=>{I.current=k&&!!P&&!!o.get("reactiveCustomComponents")},[k,P]);const z=()=>w?.map(B=>a.createElement(hs,{cellCtrl:B,editingRow:e.editing,printLayout:e.printLayout,key:B.instanceId})),N=()=>{const B=P.componentClass;return a.createElement(a.Fragment,null,k?a.createElement(B,{...P.params}):a.createElement(B,{...P.params,ref:M}))};return a.createElement("div",{ref:U,role:"row",style:V,"row-index":l,"row-id":d,"row-business-key":g},T&&z(),y&&N())},Ne=t.memo(fs),Cs=({name:e})=>{const{context:s,gos:r}=t.useContext(Q),o=t.useMemo(()=>Ct(e),[e]),n=t.useRef(null),i=t.useRef(null),u=t.useRef(null),c=t.useRef([]),l=t.useRef([]),[p,d]=t.useState(()=>[]),v=!!r.get("enableCellSpan")&&!!o.getSpannedRowCtrls,g=t.useRef([]),m=t.useRef([]),[E,R]=t.useState(()=>[]),f=t.useRef(!1),h=t.useRef(),w=t.useMemo(()=>se("ag-viewport",gt(e)),[e]),F=t.useMemo(()=>se(yt(e)),[e]),P=t.useMemo(()=>se("ag-spanning-container",Rt(e)),[e]),b=o.type==="center"||v,D=b?n:i;ie(" AG Row Container "+e+" ",D);const A=t.useCallback(()=>{const x=!b||n.current!=null,U=i.current!=null,V=!v||u.current!=null;return x&&U&&V},[]),H=t.useCallback(()=>n.current==null&&i.current==null&&u.current==null,[]),W=t.useCallback(()=>{if(H()&&(h.current=s.destroyBean(h.current)),A()){const x=y=>{const T=Re(l.current,c.current,f.current);T!==l.current&&(l.current=T,ye(y,()=>d(T)))},U=y=>{const T=Re(m.current,g.current,f.current);T!==m.current&&(m.current=T,ye(y,()=>R(T)))},V={setHorizontalScroll:y=>{n.current&&(n.current.scrollLeft=y)},setViewportHeight:y=>{n.current&&(n.current.style.height=y)},setRowCtrls:({rowCtrls:y,useFlushSync:T})=>{const k=!!T&&c.current.length>0&&y.length>0;c.current=y,x(k)},setSpannedRowCtrls:(y,T)=>{const k=!!T&&g.current.length>0&&y.length>0;g.current=y,U(k)},setDomOrder:y=>{f.current!=y&&(f.current=y,x(!1))},setContainerWidth:y=>{i.current&&(i.current.style.width=y)},setOffsetTop:y=>{i.current&&(i.current.style.transform=`translateY(${y})`)}};h.current=s.createBean(new vt(e)),h.current.setComp(V,i.current,u.current??void 0,n.current)}},[A,H]),C=t.useCallback(x=>{i.current=x,W()},[W]),M=t.useCallback(x=>{u.current=x,W()},[W]),G=t.useCallback(x=>{n.current=x,W()},[W]),S=()=>a.createElement("div",{className:F,ref:C,role:"rowgroup"},p.map(x=>a.createElement(Ne,{rowCtrl:x,containerType:o.type,key:x.instanceId})));if(!b)return S();const _=()=>v&&a.createElement("div",{className:P,ref:M,role:"rowgroup"},E.map(x=>a.createElement(Ne,{rowCtrl:x,containerType:o.type,key:x.instanceId})));return a.createElement("div",{className:w,ref:G,role:"presentation"},S(),_())},gs=t.memo(Cs),ys=()=>{const e=t.useContext(Q),{context:s,overlays:r}=e,[o,n]=t.useState(""),[i,u]=t.useState(0),[c,l]=t.useState(0),[p,d]=t.useState("0px"),[v,g]=t.useState("0px"),[m,E]=t.useState("100%"),[R,f]=t.useState("0px"),[h,w]=t.useState("0px"),[F,P]=t.useState("100%"),[b,D]=t.useState(!0),[A,H]=t.useState(!0),[W,C]=t.useState(null),[M,G]=t.useState(""),[S,_]=t.useState(null),[x,U]=t.useState("ag-layout-normal"),V=t.useRef();V.current||(V.current=new ve(()=>y.current));const y=t.useRef(null),T=t.useRef(null),k=t.useRef(null),I=t.useRef(null),z=t.useRef(null),N=t.useRef(null),B=t.useRef(null),K=t.useRef([]),J=t.useRef([]);ie(" AG Grid Body ",y),ie(" AG Pinned Top ",T),ie(" AG Sticky Top ",k),ie(" AG Middle ",N),ie(" AG Pinned Bottom ",B);const oe=t.useCallback(Z=>{if(y.current=Z,!Z){K.current=s.destroyBeans(K.current),J.current.forEach(j=>j()),J.current=[];return}if(!s)return;const ce=(j,X)=>{j.appendChild(X),J.current.push(()=>j.removeChild(X))},be=j=>{const X=s.createBean(new j);return K.current.push(X),X},me=(j,X,Ye)=>{ce(j,document.createComment(Ye)),ce(j,be(X).getGui())};me(Z,pt," AG Fake Horizontal Scroll ");const Ge=r?.getOverlayWrapperCompClass();Ge&&me(Z,Ge," AG Overlay Wrapper "),z.current&&me(z.current,mt," AG Fake Vertical Scroll ");const Ke={setRowAnimationCssOnBodyViewport:n,setColumnCount:j=>{y.current&&dt(y.current,j)},setRowCount:j=>{y.current&&ut(y.current,j)},setTopHeight:u,setBottomHeight:l,setStickyTopHeight:d,setStickyTopTop:g,setStickyTopWidth:E,setTopInvisible:D,setBottomInvisible:H,setColumnMovingCss:(j,X)=>V.current.addOrRemoveCssClass(j,X),updateLayoutClasses:U,setAlwaysVerticalScrollClass:C,setPinnedTopBottomOverflowY:G,setCellSelectableCss:(j,X)=>_(X?j:null),setBodyViewportWidth:j=>{N.current&&(N.current.style.width=j)},registerBodyViewportResizeListener:j=>{if(N.current){const X=He(e,N.current,j);J.current.push(()=>X())}},setStickyBottomHeight:f,setStickyBottomBottom:w,setStickyBottomWidth:P,setGridRootRole:j=>Z.setAttribute("role",j)},Be=s.createBean(new lt);K.current.push(Be),Be.setComp(Ke,Z,N.current,T.current,B.current,k.current,I.current)},[]),ue=t.useMemo(()=>se("ag-root","ag-unselectable",x),[x]),we=t.useMemo(()=>se("ag-body-viewport",o,x,W,S),[o,x,W,S]),Se=t.useMemo(()=>se("ag-body",x),[x]),fe=t.useMemo(()=>se("ag-floating-top",b?"ag-invisible":null,S),[S,b]),Ce=t.useMemo(()=>se("ag-sticky-top",S),[S]),L=t.useMemo(()=>se("ag-sticky-bottom",R==="0px"?"ag-invisible":null,S),[S,R]),$=t.useMemo(()=>se("ag-floating-bottom",A?"ag-invisible":null,S),[S,A]),Y=t.useMemo(()=>({height:i,minHeight:i,overflowY:M}),[i,M]),ee=t.useMemo(()=>({height:p,top:v,width:m}),[p,v,m]),O=t.useMemo(()=>({height:R,bottom:h,width:F}),[R,h,F]),q=t.useMemo(()=>({height:c,minHeight:c,overflowY:M}),[c,M]),le=Z=>a.createElement(gs,{name:Z,key:`${Z}-container`}),te=({section:Z,children:ce,className:be,style:me})=>a.createElement("div",{ref:Z,className:be,role:"presentation",style:me},ce.map(le));return a.createElement("div",{ref:oe,className:ue},a.createElement(rs,null),te({section:T,className:fe,style:Y,children:["topLeft","topCenter","topRight","topFullWidth"]}),a.createElement("div",{className:Se,ref:z,role:"presentation"},te({section:N,className:we,children:["left","center","right","fullWidth"]})),te({section:k,className:Ce,style:ee,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),te({section:I,className:L,style:O,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),te({section:B,className:$,style:q,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},Rs=t.memo(ys),vs=(e,s)=>{const{children:r,eFocusableElement:o,onTabKeyDown:n,gridCtrl:i,forceFocusOutWhenTabGuardsAreEmpty:u,isEmpty:c}=e,{context:l}=t.useContext(Q),p=t.useRef(null),d=t.useRef(null),v=t.useRef(),g=h=>{const w=h==null?void 0:parseInt(h,10).toString();[p,d].forEach(F=>{w===void 0?F.current?.removeAttribute("tabindex"):F.current?.setAttribute("tabindex",w)})};t.useImperativeHandle(s,()=>({forceFocusOutOfContainer(h){v.current?.forceFocusOutOfContainer(h)}}));const m=t.useCallback(()=>{const h=p.current,w=d.current;if(!h&&!w){v.current=l.destroyBean(v.current);return}if(h&&w){const F={setTabIndex:g};v.current=l.createBean(new it({comp:F,eTopGuard:h,eBottomGuard:w,eFocusableElement:o,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:u,focusInnerElement:P=>i.focusInnerElement(P),isEmpty:c}))}},[]),E=t.useCallback(h=>{p.current=h,m()},[m]),R=t.useCallback(h=>{d.current=h,m()},[m]),f=h=>{const w=h==="top"?Ee.TAB_GUARD_TOP:Ee.TAB_GUARD_BOTTOM;return a.createElement("div",{className:`${Ee.TAB_GUARD} ${w}`,role:"presentation",ref:h==="top"?E:R})};return a.createElement(a.Fragment,null,f("top"),r,f("bottom"))},ws=t.forwardRef(vs),Ss=t.memo(ws),bs=({context:e})=>{const[s,r]=t.useState(""),[o,n]=t.useState(""),[i,u]=t.useState(null),[c,l]=t.useState(null),[p,d]=t.useState(!1),[v,g]=t.useState(),m=t.useRef(),E=t.useRef(null),R=t.useRef(),[f,h]=t.useState(null),w=t.useRef(()=>{}),F=t.useRef(),P=t.useRef([]),b=t.useCallback(()=>{},[]),D=t.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);ie(" AG Grid ",E);const A=t.useCallback(S=>{if(E.current=S,m.current=S?e.createBean(new ot):e.destroyBean(m.current),!S||e.isDestroyed())return;const _=m.current;w.current=_.focusInnerElement.bind(_);const x={destroyGridUi:()=>{},setRtlClass:r,forceFocusOutOfContainer:U=>{if(!U&&F.current?.isDisplayed()){F.current.forceFocusOutOfContainer(U);return}R.current?.forceFocusOutOfContainer(U)},updateLayoutClasses:n,getFocusableContainers:()=>{const U=[],V=E.current?.querySelector(".ag-root");return V&&U.push({getGui:()=>V}),P.current.forEach(y=>{y.isDisplayed()&&U.push(y)}),U},setCursor:u,setUserSelect:l};_.setComp(x,S,S),d(!0)},[]);t.useEffect(()=>{const S=m.current,_=E.current;if(!v||!D||!S||!f||!_)return;const x=[],{watermarkSelector:U,paginationSelector:V,sideBarSelector:y,statusBarSelector:T,gridHeaderDropZonesSelector:k}=S.getOptionalSelectors(),I=[];if(k){const N=e.createBean(new k.component),B=N.getGui();_.insertAdjacentElement("afterbegin",B),I.push(B),x.push(N)}if(y){const N=e.createBean(new y.component),B=N.getGui(),K=f.querySelector(".ag-tab-guard-bottom");K&&(K.insertAdjacentElement("beforebegin",B),I.push(B)),x.push(N),P.current.push(N)}const z=N=>{const B=e.createBean(new N),K=B.getGui();return _.insertAdjacentElement("beforeend",K),I.push(K),x.push(B),B};if(T&&z(T.component),V){const N=z(V.component);F.current=N,P.current.push(N)}return U&&z(U.component),()=>{e.destroyBeans(x),I.forEach(N=>{N.parentElement?.removeChild(N)})}},[v,f,D]);const H=t.useMemo(()=>se("ag-root-wrapper",s,o),[s,o]),W=t.useMemo(()=>se("ag-root-wrapper-body","ag-focus-managed",o),[o]),C=t.useMemo(()=>({userSelect:c??"",WebkitUserSelect:c??"",cursor:i??""}),[c,i]),M=t.useCallback(S=>{R.current=S,g(S!==null)},[]),G=t.useCallback(()=>!m.current?.isFocusable(),[]);return a.createElement("div",{ref:A,className:H,style:C,role:"presentation"},a.createElement("div",{className:W,ref:h,role:"presentation"},p&&f&&D&&a.createElement(Q.Provider,{value:D},a.createElement(Ss,{ref:M,eFocusableElement:f,onTabKeyDown:b,gridCtrl:m.current,forceFocusOutWhenTabGuardsAreEmpty:!0,isEmpty:G},a.createElement(Rs,null)))))},Es=t.memo(bs),Ps=class extends st{wireBeans(e){this.ctrlsSvc=e.ctrlsSvc}areHeaderCellsRendered(){return this.ctrlsSvc.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(s=>s.areCellsRendered()))}},ks={gridOptions:void 0,modules:void 0,containerStyle:void 0,className:void 0,setGridApi:void 0,componentWrappingElement:void 0,maxComponentCreationTimeMs:void 0,children:void 0},$e=new Set(Object.keys(ks)),Je=e=>{const s=t.useRef(),r=t.useRef(null),o=t.useRef(null),n=t.useRef([]),i=t.useRef([]),u=t.useRef(e),c=t.useRef(),l=t.useRef(),p=t.useRef(!1),[d,v]=t.useState(void 0),[,g]=t.useState(0),m=t.useCallback(f=>{if(r.current=f,!f){n.current.forEach(C=>C()),n.current.length=0;return}const h=e.modules||[];o.current||(o.current=new $t(()=>g(C=>C+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{o.current?.destroy(),o.current=null}));const w=qe(e.gridOptions,e,Object.keys(e).filter(C=>!$e.has(C))),F=()=>{if(p.current){const C=()=>c.current?.shouldQueueUpdates()?void 0:i.current.shift();let M=C();for(;M;)M(),M=C()}},P=new Gs(F);c.current=P;const b=new Ps,D={providedBeanInstances:{frameworkCompWrapper:new Fs(o.current,w.reactiveCustomComponents??Qe("reactiveCustomComponents")??!0),renderStatus:b},modules:h,frameworkOverrides:P,setThemeOnGridDiv:!0},A=C=>{v(C),C.createBean(b),n.current.push(()=>{C.destroy()}),C.getBean("ctrlsSvc").whenReady({addDestroyFunc:M=>{n.current.push(M)}},()=>{if(C.isDestroyed())return;const M=s.current;M&&e.setGridApi?.(M)})},H=C=>{C.getBean("ctrlsSvc").whenReady({addDestroyFunc:M=>{n.current.push(M)}},()=>{i.current.forEach(M=>M()),i.current.length=0,p.current=!0})},W=new Ze;w.gridId??(w.gridId=l.current),s.current=W.create(f,w,A,H,D),n.current.push(()=>{s.current=void 0}),s.current&&(l.current=s.current.getGridId())},[]),E=t.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),R=t.useCallback(f=>{p.current&&!c.current?.shouldQueueUpdates()?f():i.current.push(f)},[]);return t.useEffect(()=>{const f=Ms(u.current,e);u.current=e,R(()=>{s.current&&Xe(f,s.current)})},[e]),a.createElement("div",{style:E,className:e.className,ref:m},d&&!d.isDestroyed()?a.createElement(Es,{context:d}):null,o.current?.getPortals()??null)};function Ms(e,s){const r={};return Object.keys(s).forEach(o=>{if($e.has(o))return;const n=s[o];e[o]!==n&&(r[o]=n)}),r}var Fs=class extends tt{constructor(e,s){super(),this.parent=e,this.reactiveCustomComponents=s}createWrapper(e,s){if(this.reactiveCustomComponents){const n=(i=>{switch(i){case"filter":return Wt;case"floatingFilterComponent":return Nt;case"dateComponent":return It;case"dragAndDropImageComponent":return Ot;case"loadingOverlayComponent":return Ht;case"noRowsOverlayComponent":return _t;case"statusPanel":return Lt;case"toolPanel":return jt;case"menuItem":return Vt;case"cellRenderer":return Dt;case"innerHeaderComponent":return Ut}})(s.name);if(n)return new n(e,this.parent,s)}else switch(s.name){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":xe();break}const r=!s.cellRenderer&&s.name!=="toolPanel";return new je(e,this.parent,s,r)}},xs=t.forwardRef((e,s)=>{const r=t.useContext(Q),{registry:o,context:n,gos:i,rowModel:u}=r,[c,l]=t.useState(()=>new re),[p,d]=t.useState(()=>new re),[v,g]=t.useState(),[m,E]=t.useState(),R=t.useRef(),f=t.useRef(null),h=t.useRef(),w=t.useMemo(()=>rt(e.api.getGridId(),v?.rowModelType??"clientSide"),[e]),F=t.useMemo(()=>c.toString()+" ag-details-row",[c]),P=t.useMemo(()=>p.toString()+" ag-details-grid",[p]);s&&t.useImperativeHandle(s,()=>({refresh(){return R.current?.refresh()??!1}})),e.template&&Ue(230);const b=t.useCallback(A=>{if(f.current=A,!A){R.current=n.destroyBean(R.current),h.current?.();return}const H={addOrRemoveCssClass:(C,M)=>l(G=>G.setClass(C,M)),addOrRemoveDetailGridCssClass:(C,M)=>d(G=>G.setClass(C,M)),setDetailGrid:C=>g(C),setRowData:C=>E(C),getGui:()=>f.current},W=o.createDynamicBean("detailCellRendererCtrl",!0);if(W&&(n.createBean(W),W.init(H,e),R.current=W,i.get("detailRowAutoHeight"))){const C=()=>{if(f.current==null)return;const M=f.current.clientHeight;M!=null&&M>0&&setTimeout(()=>{e.node.setRowHeight(M),(at(i)||ct(i))&&u.onRowHeightChanged()},0)};h.current=He(r,A,C),C()}},[]),D=t.useCallback(A=>{R.current?.registerDetailWithMaster(A)},[]);return a.createElement("div",{className:F,ref:b},v&&a.createElement(Je,{className:P,...v,modules:w,rowData:m,setGridApi:D}))}),Gs=class extends et{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.renderingEngine="react",this.frameworkComponents={agGroupCellRenderer:Ie,agGroupRowRenderer:Ie,agDetailCellRenderer:xs},this.wrapIncoming=(s,r)=>r==="ensureVisible"?xt(s):s()}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const s=e.prototype;return!(s&&"getGui"in s)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return Ft()}},Bs=class extends t.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(s=>s(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return a.createElement(Je,{...this.props,setGridApi:this.setGridApi})}};const Os=()=>{const[e]=t.useState([{make:"Tesla",model:"Model Y",price:64950,electric:!0},{make:"Ford",model:"F-Series",price:33850,electric:!1},{make:"Toyota",model:"Corolla",price:29600,electric:!1}]),[s]=t.useState([{field:"make",sortable:!0,filter:!0},{field:"model",sortable:!0,filter:!0},{field:"price",sortable:!0,filter:!0},{field:"electric",sortable:!0,filter:!0,cellRenderer:r=>r.value?"是":"否"}]);return Ae.jsx("div",{className:"ag-theme-alpine",style:{height:500,width:"100%"},children:Ae.jsx(Bs,{columnDefs:s,pagination:!0,paginationAutoPageSize:!0,rowData:e})})};export{Os as default};
