import{F as v,b as X,r as st,j as b}from"../jse/index-index-CuT9J82M.js";import{e as lt,D as ut,z as ct,E as pt,L as V,j as K,k as ft,A as ht,l as B,p as dt,n as U,q as mt,r as vt,t as Z,s as yt,G as gt,v as Y,x as bt,X as tt,Y as et,y as xt,R as At,T as Pt}from"./generateCategoricalChart-B_EJl9nj.js";import"./throttle-DebTxfeT.js";import"./isSymbol-Bx55wF01.js";import"./_baseAssignValue-b_c2V9az.js";import"./bootstrap-Gpg-_wXy.js";var Ot=["type","layout","connectNulls","ref"],jt=["key"];function _(t){"@babel/helpers - typeof";return _=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_(t)}function H(t,r){if(t==null)return{};var n=St(t,r),e,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)e=o[i],!(r.indexOf(e)>=0)&&Object.prototype.propertyIsEnumerable.call(t,e)&&(n[e]=t[e])}return n}function St(t,r){if(t==null)return{};var n={};for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){if(r.indexOf(e)>=0)continue;n[e]=t[e]}return n}function W(){return W=Object.assign?Object.assign.bind():function(t){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}return t},W.apply(this,arguments)}function J(t,r){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,e)}return n}function g(t){for(var r=1;r<arguments.length;r++){var n=arguments[r]!=null?arguments[r]:{};r%2?J(Object(n),!0).forEach(function(e){A(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function D(t){return _t(t)||Dt(t)||wt(t)||kt()}function kt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wt(t,r){if(t){if(typeof t=="string")return q(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q(t,r)}}function Dt(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function _t(t){if(Array.isArray(t))return q(t)}function q(t,r){(r==null||r>t.length)&&(r=t.length);for(var n=0,e=new Array(r);n<r;n++)e[n]=t[n];return e}function Et(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function Q(t,r){for(var n=0;n<r.length;n++){var e=r[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,nt(e.key),e)}}function Lt(t,r,n){return r&&Q(t.prototype,r),n&&Q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ct(t,r,n){return r=z(r),Tt(t,rt()?Reflect.construct(r,n||[],z(t).constructor):r.apply(t,n))}function Tt(t,r){if(r&&(_(r)==="object"||typeof r=="function"))return r;if(r!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nt(t)}function Nt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rt=function(){return!!t})()}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},z(t)}function It(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&G(t,r)}function G(t,r){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,i){return e.__proto__=i,e},G(t,r)}function A(t,r,n){return r=nt(r),r in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function nt(t){var r=Ft(t,"string");return _(r)=="symbol"?r:r+""}function Ft(t,r){if(_(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var e=n.call(t,r);if(_(e)!="object")return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var E=function(t){function r(){var n;Et(this,r);for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return n=Ct(this,r,[].concat(i)),A(n,"state",{isAnimationFinished:!0,totalLength:0}),A(n,"generateSimpleStrokeDasharray",function(a,s){return"".concat(s,"px ").concat(a-s,"px")}),A(n,"getStrokeDasharray",function(a,s,l){var c=l.reduce(function(P,j){return P+j});if(!c)return n.generateSimpleStrokeDasharray(s,a);for(var f=Math.floor(a/c),h=a%c,p=s-a,d=[],u=0,m=0;u<l.length;m+=l[u],++u)if(m+l[u]>h){d=[].concat(D(l.slice(0,u)),[h-m]);break}var x=d.length%2===0?[0,p]:[p];return[].concat(D(r.repeat(l,f)),D(d),x).map(function(P){return"".concat(P,"px")}).join(", ")}),A(n,"id",yt("recharts-line-")),A(n,"pathRef",function(a){n.mainCurve=a}),A(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),A(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return It(r,t),Lt(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();this.setState({totalLength:e})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var e=this.getTotalLength();e!==this.state.totalLength&&this.setState({totalLength:e})}}},{key:"getTotalLength",value:function(){var e=this.mainCurve;try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(e,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var o=this.props,a=o.points,s=o.xAxis,l=o.yAxis,c=o.layout,f=o.children,h=ct(f,pt);if(!h)return null;var p=function(m,x){return{x:m.x,y:m.y,value:m.value,errorVal:Z(m.payload,x)}},d={clipPath:e?"url(#clipPath-".concat(i,")"):null};return v.createElement(V,d,h.map(function(u){return v.cloneElement(u,{key:"bar-".concat(u.props.dataKey),data:a,xAxis:s,yAxis:l,layout:c,dataPointFormatter:p})}))}},{key:"renderDots",value:function(e,i,o){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var s=this.props,l=s.dot,c=s.points,f=s.dataKey,h=K(this.props,!1),p=K(l,!0),d=c.map(function(m,x){var P=g(g(g({key:"dot-".concat(x),r:3},h),p),{},{index:x,cx:m.x,cy:m.y,value:m.value,dataKey:f,payload:m.payload,points:c});return r.renderDotItem(l,P)}),u={clipPath:e?"url(#clipPath-".concat(i?"":"dots-").concat(o,")"):null};return v.createElement(V,W({className:"recharts-line-dots",key:"dots"},u),d)}},{key:"renderCurveStatically",value:function(e,i,o,a){var s=this.props,l=s.type,c=s.layout,f=s.connectNulls;s.ref;var h=H(s,Ot),p=g(g(g({},K(h,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(o,")"):null,points:e},a),{},{type:l,layout:c,connectNulls:f});return v.createElement(ft,W({},p,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(e,i){var o=this,a=this.props,s=a.points,l=a.strokeDasharray,c=a.isAnimationActive,f=a.animationBegin,h=a.animationDuration,p=a.animationEasing,d=a.animationId,u=a.animateNewValues,m=a.width,x=a.height,P=this.state,j=P.prevPoints,L=P.totalLength;return v.createElement(ht,{begin:f,duration:h,isActive:c,easing:p,from:{t:0},to:{t:1},key:"line-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(k){var O=k.t;if(j){var C=j.length/s.length,S=s.map(function(y,M){var I=Math.floor(M*C);if(j[I]){var F=j[I],w=B(F.x,y.x),it=B(F.y,y.y);return g(g({},y),{},{x:w(O),y:it(O)})}if(u){var at=B(m*2,y.x),ot=B(x/2,y.y);return g(g({},y),{},{x:at(O),y:ot(O)})}return g(g({},y),{},{x:y.x,y:y.y})});return o.renderCurveStatically(S,e,i)}var R=B(0,L),T=R(O),N;if(l){var $="".concat(l).split(/[,\s]+/gim).map(function(y){return parseFloat(y)});N=o.getStrokeDasharray(T,L,$)}else N=o.generateSimpleStrokeDasharray(L,T);return o.renderCurveStatically(s,e,i,{strokeDasharray:N})})}},{key:"renderCurve",value:function(e,i){var o=this.props,a=o.points,s=o.isAnimationActive,l=this.state,c=l.prevPoints,f=l.totalLength;return s&&a&&a.length&&(!c&&f>0||!dt(c,a))?this.renderCurveWithAnimation(e,i):this.renderCurveStatically(a,e,i)}},{key:"render",value:function(){var e,i=this.props,o=i.hide,a=i.dot,s=i.points,l=i.className,c=i.xAxis,f=i.yAxis,h=i.top,p=i.left,d=i.width,u=i.height,m=i.isAnimationActive,x=i.id;if(o||!s||!s.length)return null;var P=this.state.isAnimationFinished,j=s.length===1,L=X("recharts-line",l),k=c&&c.allowDataOverflow,O=f&&f.allowDataOverflow,C=k||O,S=U(x)?this.id:x,R=(e=K(a,!1))!==null&&e!==void 0?e:{r:3,strokeWidth:2},T=R.r,N=T===void 0?3:T,$=R.strokeWidth,y=$===void 0?2:$,M=mt(a)?a:{},I=M.clipDot,F=I===void 0?!0:I,w=N*2+y;return v.createElement(V,{className:L},k||O?v.createElement("defs",null,v.createElement("clipPath",{id:"clipPath-".concat(S)},v.createElement("rect",{x:k?p:p-d/2,y:O?h:h-u/2,width:k?d:d*2,height:O?u:u*2})),!F&&v.createElement("clipPath",{id:"clipPath-dots-".concat(S)},v.createElement("rect",{x:p-w/2,y:h-w/2,width:d+w,height:u+w}))):null,!j&&this.renderCurve(C,S),this.renderErrorBar(C,S),(j||a)&&this.renderDots(C,F,S),(!m||P)&&vt.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(e,i){return e.animationId!==i.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:i.curPoints}:e.points!==i.curPoints?{curPoints:e.points}:null}},{key:"repeat",value:function(e,i){for(var o=e.length%2!==0?[].concat(D(e),[0]):e,a=[],s=0;s<i;++s)a=[].concat(D(a),D(o));return a}},{key:"renderDotItem",value:function(e,i){var o;if(v.isValidElement(e))o=v.cloneElement(e,i);else if(lt(e))o=e(i);else{var a=i.key,s=H(i,jt),l=X("recharts-line-dot",typeof e!="boolean"?e.className:"");o=v.createElement(ut,W({key:a},s,{className:l}))}return o}}])}(st.PureComponent);A(E,"displayName","Line");A(E,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!gt.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});A(E,"getComposedData",function(t){var r=t.props,n=t.xAxis,e=t.yAxis,i=t.xAxisTicks,o=t.yAxisTicks,a=t.dataKey,s=t.bandSize,l=t.displayedData,c=t.offset,f=r.layout,h=l.map(function(p,d){var u=Z(p,a);return f==="horizontal"?{x:Y({axis:n,ticks:i,bandSize:s,entry:p,index:d}),y:U(u)?null:e.scale(u),value:u,payload:p}:{x:U(u)?null:n.scale(u),y:Y({axis:e,ticks:o,bandSize:s,entry:p,index:d}),value:u,payload:p}});return g({points:h,layout:f},c)});var Bt=bt({chartName:"LineChart",GraphicalChild:E,axisComponents:[{axisType:"xAxis",AxisComp:tt},{axisType:"yAxis",AxisComp:et}],formatAxisMap:xt});const Wt=({active:t,payload:r,label:n})=>t&&r?.[0]?.value?b.jsxs("div",{className:"border-border bg-card rounded-lg border p-3 shadow-sm",children:[b.jsx("p",{className:"text-foreground text-sm",children:n}),r.map(e=>b.jsxs("p",{className:"text-sm font-medium",children:[e.name,e.value?.toLocaleString()]},e.name))]}):null;function Ut({data:t}){return b.jsx("div",{className:"h-[200px]",children:b.jsx(At,{height:"100%",width:"100%",children:b.jsxs(Bt,{data:t,children:[b.jsx(E,{dataKey:"subscribers",dot:!1,name:"实际用户",stroke:"hsl(var(--primary))",strokeWidth:2,type:"monotone"}),b.jsx(E,{dataKey:"projected",dot:!1,name:"预计用户",stroke:"hsl(var(--muted-foreground))",strokeDasharray:"5 5",strokeWidth:2,type:"monotone"}),b.jsx(tt,{axisLine:!1,dataKey:"name",tick:{fill:"hsl(var(--muted-foreground))"},tickLine:!1}),b.jsx(et,{axisLine:!1,tick:{fill:"hsl(var(--muted-foreground))"},tickFormatter:r=>r.toLocaleString(),tickLine:!1}),b.jsx(Pt,{content:b.jsx(Wt,{})})]})})})}export{Ut as SubscribersChart};
